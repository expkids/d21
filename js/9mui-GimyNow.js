var rule = {
    title: '劇迷ai',
    host: 'https://gimy.now',
    url: '/genre/fyclass', 
    searchUrl: '/find/-------------.html?wd=**',
    filterable: 1,
	searchable: 1,
    filter_url: 'https://gimy.now/explore/{{fl.cateIdMain}}{{fl.cateId}}-{{fl.area}}----------{{fl.year}}.html',	
    filter: {
        "1":[{"key":"cateId","name":"類型","value":[{"n":"全部","v":"1"},{"n":"動作片","v":"6"},{"n":"喜劇片","v":"7"},{"n":"愛情片","v":"8"},{"n":"科幻片","v":"9"},{"n":"恐怖片","v":"10"},{"n":"劇情片","v":"11"},{"n":"戰爭片","v":"12"},{"n":"動畫電影","v":"24"}]},
            {"key":"area","name":"地區","value":[{"n":"全部","v":""},{"n":"大陸","v":"大陸"},{"n":"中國大陸","v":"中國大陸"},{"n":"內地","v":"內地"},{"n":"韓國","v":"韓國"},{"n":"美國","v":"美國"},{"n":"歐美","v":"歐美"},{"n":"香港","v":"香港"},{"n":"臺灣","v":"臺灣"},{"n":"日本","v":"日本"},{"n":"新加坡","v":"新加坡"},{"n":"泰國","v":"泰國"},{"n":"英國","v":"英國"},{"n":"德國","v":"德國"},{"n":"俄羅斯","v":"俄羅斯"},{"n":"印度","v":"印度"},{"n":"加拿大","v":"加拿大"},{"n":"義大利","v":"意大利"},{"n":"法國","v":"法國"},{"n":"其他","v":"其他"}]},
            {"key":"year","name":"年份","value":[{"n":"全部","v":""},{"n":"2026","v":"2026"},{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2013","v":"2013"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"}]},
            {"key":"cateIdMain","name":"","value":[{"n":"","v":"1"}]}],
        "2":[{"key":"cateId","name":"類型","value":[{"n":"全部","v":"2"},{"n":"陸劇","v":"13"},{"n":"韓劇","v":"20"},{"n":"美劇","v":"16"},{"n":"港劇","v":"21"},{"n":"台劇","v":"14"},{"n":"日劇","v":"15"},{"n":"紀錄片","v":"22"},{"n":"海外劇","v":"31"}]},
            {"key":"area","name":"地區","value":[{"n":"全部","v":""},{"n":"大陸","v":"大陸"},{"n":"中國大陸","v":"中國大陸"},{"n":"內地","v":"內地"},{"n":"韓國","v":"韓國"},{"n":"美國","v":"美國"},{"n":"歐美","v":"歐美"},{"n":"香港","v":"香港"},{"n":"臺灣","v":"臺灣"},{"n":"日本","v":"日本"},{"n":"新加坡","v":"新加坡"},{"n":"泰國","v":"泰國"},{"n":"英國","v":"英國"},{"n":"德國","v":"德國"},{"n":"俄羅斯","v":"俄羅斯"},{"n":"印度","v":"印度"},{"n":"加拿大","v":"加拿大"},{"n":"義大利","v":"意大利"},{"n":"法國","v":"法國"},{"n":"其他","v":"其他"}]},
            {"key":"year","name":"年份","value":[{"n":"全部","v":""},{"n":"2026","v":"2026"},{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2013","v":"2013"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"}]},
            {"key":"cateIdMain","name":"","value":[{"n":"","v":"2"}]}],
        "34":[{"key":"area","name":"地區","value":[{"n":"全部","v":""},{"n":"內地","v":"內地"},{"n":"大陸","v":"大陸"},{"n":"中國","v":"中國"},{"n":"中國大陸","v":"中國大陸"},{"n":"韓國","v":"韓國"},{"n":"臺灣","v":"臺灣"},{"n":"美國","v":"美國"},{"n":"歐美","v":"歐美"},{"n":"日本","v":"日本"},{"n":"香港","v":"香港"}]},
            {"key":"year","name":"年份","value":[{"n":"全部","v":""},{"n":"2026","v":"2026"},{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2013","v":"2013"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"},{"n":"2010","v":"2010"}]},
            {"key":"cateIdMain","name":"","value":[{"n":"","v":"34"}]}],
        "29":[{"key":"area","name":"地區","value":[{"n":"全部","v":""},{"n":"大陸","v":"大陸"},{"n":"中國","v":"中國"},{"n":"中國大陸","v":"中國大陸"},{"n":"韓國","v":"韓國"},{"n":"臺灣","v":"臺灣"},{"n":"美國","v":"美國"},{"n":"歐美","v":"歐美"},{"n":"日本","v":"日本"},{"n":"香港","v":"香港"}]},
            {"key":"year","name":"年份","value":[{"n":"全部","v":""},{"n":"2026","v":"2026"},{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2013","v":"2013"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"},{"n":"2010","v":"2010"}]},
            {"key":"cateIdMain","name":"","value":[{"n":"","v":"29"}]}],
        "4":[{"key":"area","name":"地區","value":[{"n":"全部","v":""},{"n":"大陸","v":"大陸"},{"n":"中國","v":"中國"},{"n":"中國大陸","v":"中國大陸"},{"n":"韓國","v":"韓國"},{"n":"臺灣","v":"臺灣"},{"n":"美國","v":"美國"},{"n":"歐美","v":"歐美"},{"n":"日本","v":"日本"},{"n":"香港","v":"香港"}]},
            {"key":"year","name":"年份","value":[{"n":"全部","v":""},{"n":"2026","v":"2026"},{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2013","v":"2013"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"},{"n":"2010","v":"2010"}]},
            {"key":"cateIdMain","name":"","value":[{"n":"","v":"4"}]}]
    },

    filter_def: {
        1: {cateIdMain: '1', cateId: '1', area: '', year: ''},
        2: {cateIdMain: '2', cateId: '2', area: '', year: ''},
        34: {cateIdMain: '34', cateId: '34', area: '', year: ''},
        29: {cateIdMain: '29', cateId: '29', area: '', year: ''},
        4: {cateIdMain: '4', cateId: '4', area: '', year: ''}
    },
	
    headers: {'User-Agent': 'MOBILE_UA'},
    class_name: '電影&電視劇&短劇&綜藝&動漫',
    class_url: '1&2&34&29&4',
    play_parse: true,
    
    tab_order:['高清線路 ᴴᴰ','優庫線路 ᴴᴰ','優酷線路 ᴴᴰ','特清線路 ᴴᴰ','4K線路 ᴴᴰ','極清線路 ᴴᴰ','超清線路 ᴴᴰ','新浪雲','速播雲','量子雲','最大雲','魔速雲','如意雲','無盡雲','暴風雲','非凡雲','優質雲','清晰雲','極速雲','鈦快雲','順暢雲'],
    tab_rename:{'高清線路 ᴴᴰ':'高清線路 ᴴᴰ','優庫線路 ᴴᴰ':'優庫線路 ᴴᴰ','優酷線路 ᴴᴰ':'優酷線路 ᴴᴰ','特清線路 ᴴᴰ':'特清線路 ᴴᴰ','4K線路 ᴴᴰ':'4K線路 ᴴᴰ','極清線路 ᴴᴰ':'極清線路 ᴴᴰ','超清線路 ᴴᴰ':'超清線路 ᴴᴰ','新浪雲':'新浪資源','速播雲':'速播資源','量子雲':'量子資源','最大雲':'最大資源','魔速雲':'魔都資源','如意雲':'如意資源','無盡雲':'無盡資源','暴風雲':'暴風資源','非凡雲':'非凡資源','優質雲':'優質資源','清晰雲':'魔爪資源','極速雲':'極速資源','鈦快雲':'茅台資源','順暢雲':'順暢資源'},
    
     lazy: `js:
        log('接收到播放链接:' + input);
        try {
            let playPageHtml = request(input);
            // 尝试匹配 player_ 数据
            let match = playPageHtml.match(/player_(?:\\d+)?\\s*=\\s*({[^;]+});/);
            if (match) {
                let playerData = JSON.parse(match[1]);
                let url = playerData.url;
                if (playerData.encrypt == '1') {
                    url = unescape(url);
                } else if (playerData.encrypt == '2') {
                    url = unescape(base64Decode(url));
                }
                // 如果是直链，直接返回
                if (/\\.(m3u8|mp4)/.test(url)) {
                    log('解析到直链:' + url);
                    return url;
                }
                // 如果是分享页，再次提取
                if (/share/.test(url)) {
                    let shareHtml = request(url);
                    let m3u8Match = shareHtml.match(/(https?:[^'"]+\\.m3u8[^'"]*)/);
                    if (m3u8Match) return m3u8Match[1];
                }
            }
            // 备用方案：直接查找iframe或m3u8
            let iframeMatch = playPageHtml.match(/<iframe[^>]+src=['"]([^'"]+)['"]/);
            if (iframeMatch) return iframeMatch[1];
            
            let m3u8Match = playPageHtml.match(/(https?:[^'"]+\\.m3u8[^'"]*)/);
            if (m3u8Match) return m3u8Match[1];
            
            return '暂无线路';
        } catch(e) {
            return '解析失败:' + e.message;
        }
    `,
    
    limit: 6,
    推荐: 'li.col-xs-4;li;a&&title;a.video-pic&&data-original;.text-bg-r&&Text;a&&href',
    double: true,
    一级: 'ul.col-md-8&&li;h5&&Text;.video-pic&&data-original;.note&&Text;a&&href',
    二级: {
        "title": "h1&&Text",
        "img": ".video-pic&&data-original",
        "desc": ".detail-info span:eq(0)&&Text;.detail-info span:eq(3)&&Text",
        "content": ".details-content-all&&Text",
        "tabs": ".nav-tabs li",
        "lists": "ul.fade:eq(#id) li a" 
    },
	搜索: '#content&&div.details-info-min;*;*;.hidden-lg&&Text;*',
};